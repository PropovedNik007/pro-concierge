import{c as q,a as v,t as T,n as re,d as ae}from"../chunks/disclose-version.D4yGIf47.js";import{i as K}from"../chunks/legacy.CT_svfx6.js";import{f as A,p as j,aI as se,aJ as X,b as L,a9 as I,aK as Y,c as k,r as y,t as N,s as _,g as s,a as H,m as J,aL as Z,ak as U,aM as oe}from"../chunks/runtime.Cqpx5nLn.js";import{a as E}from"../chunks/store.DmgX54Oa.js";import{l as M,p as z,s as Q,i as D,o as ne}from"../chunks/index-client.CzUS1NVV.js";import{a as le,e as ie}from"../chunks/class.DPkg1QDy.js";import{e as ee}from"../chunks/utils.BORTP5RR.js";import{c as V,a as W}from"../chunks/auth.M5j1s9aF.js";import{F as de,b as x,s as F,t as R,c as ce,N as ge,a as ue}from"../chunks/NavBrand.CFnHIN77.js";import{b as ve}from"../chunks/paths.mDRoFFuZ.js";const me=b=>b;function fe(b,{delay:e=0,duration:n=400,easing:i=me}={}){const h=+getComputedStyle(b).opacity;return{delay:e,duration:n,easing:i,css:d=>`opacity: ${d*h}`}}function he(b,e){const n=M(e,["children","$$slots","$$events","$$legacy"]),i=M(n,["transition","params","open"]);let h=z(e,"transition",8,fe),d=z(e,"params",24,()=>({})),f=z(e,"open",12,!0);function p(l){l!=null&&l.stopPropagation&&l.stopPropagation(),f(!1)}de(b,Q({get open(){return f()},set open(l){f(l)},get transition(){return h()},get params(){return d()}},()=>i,{$$events:{show(l){x.call(this,e,l)}},children:(l,$)=>{var P=q(),c=A(P);F(c,e,"default",{close:p},null),v(l,P)},$$slots:{default:!0},$$legacy:!0}))}var pe=T('<span class="sr-only"> </span>'),be=T("<a><!> <!></a>"),_e=T('<span class="sr-only"> </span>'),ye=T("<button><!> <!></button>");function xe(b,e){const n=M(e,["children","$$slots","$$events","$$legacy"]),i=M(n,["color","name","ariaLabel","size","href"]);j(e,!1);let h=z(e,"color",8,"default"),d=z(e,"name",24,()=>{}),f=z(e,"ariaLabel",24,()=>{}),p=z(e,"size",8,"md"),l=z(e,"href",24,()=>{});const $=se("background"),P={dark:"text-gray-500 hover:text-gray-900 hover:bg-gray-200 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",gray:"text-gray-500 focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800 dark:hover:text-gray-300",red:"text-red-500 focus:ring-red-400 hover:bg-red-200 dark:hover:bg-red-800 dark:hover:text-red-300",yellow:"text-yellow-500 focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-800 dark:hover:text-yellow-300",green:"text-green-500 focus:ring-green-400 hover:bg-green-200 dark:hover:bg-green-800 dark:hover:text-green-300",indigo:"text-indigo-500 focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800 dark:hover:text-indigo-300",purple:"text-purple-500 focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-purple-800 dark:hover:text-purple-300",pink:"text-pink-500 focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-pink-800 dark:hover:text-pink-300",blue:"text-blue-500 focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-blue-800 dark:hover:text-blue-300",primary:"text-primary-500 focus:ring-primary-400 hover:bg-primary-200 dark:hover:bg-primary-800 dark:hover:text-primary-300",default:"focus:ring-gray-400 hover:bg-gray-100"},c={xs:"m-0.5 rounded-sm focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"m-0.5 rounded-lg focus:ring-2 p-1.5",lg:"m-0.5 rounded-lg focus:ring-2 p-2.5"};let o=J();const m={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5",lg:"w-5 h-5"};X(()=>(I(p()),I(h()),I(n)),()=>{L(o,R("focus:outline-none whitespace-normal",c[p()],P[h()],h()==="default"&&($?"dark:hover:bg-gray-600":"dark:hover:bg-gray-700"),n.class))}),Y(),K();var r=q(),t=A(r);D(t,l,g=>{var u=be();let w;var a=k(u);D(a,d,B=>{var S=pe(),O=k(S,!0);y(S),N(()=>E(O,d())),v(B,S)});var C=_(a,2);F(C,e,"default",{get svgSize(){return m[p()]}},null),y(u),N(()=>w=V(u,w,{href:l(),...i,class:s(o),"aria-label":f()??d()})),v(g,u)},g=>{var u=ye();let w;var a=k(u);D(a,d,B=>{var S=_e(),O=k(S,!0);y(S),N(()=>E(O,d())),v(B,S)});var C=_(a,2);F(C,e,"default",{get svgSize(){return m[p()]}},null),y(u),N(()=>w=V(u,w,{type:"button",...i,class:s(o),"aria-label":f()??d()})),ee("click",u,function(B){x.call(this,e,B)}),v(g,u)}),v(b,r),H()}var ke=re('<svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>');function we(b,e){const n=M(e,["children","$$slots","$$events","$$legacy"]),i=M(n,["name"]);j(e,!1);let h=z(e,"name",8,"Close");K();var d=U(()=>R("ms-auto",n.class));xe(b,Q({get name(){return h()}},()=>i,{get class(){return s(d)},$$events:{click(f){x.call(this,e,f)}},children:Z,$$slots:{default:(f,p)=>{const l=U(()=>p.svgSize);var $=ke();N(()=>le($,s(l))),v(f,$)}}})),H()}var ze=T("<div><!></div>"),Te=T("<!> <!> <!>",1);function $e(b,e){const n=ce(e),i=M(e,["children","$$slots","$$events","$$legacy"]),h=M(i,["dismissable","defaultClass"]);j(e,!1);let d=z(e,"dismissable",8,!1),f=z(e,"defaultClass",8,"p-4 gap-3 text-sm"),p=J();X(()=>(I(f()),I(d()),I(i)),()=>{L(p,R(f(),(n.icon||d())&&"flex items-center",i.class))}),Y(),K(),he(b,Q({get dismissable(){return d()},color:"primary",role:"alert",rounded:!0},()=>h,{get class(){return s(p)},$$events:{close(l){x.call(this,e,l)}},children:Z,$$slots:{default:(l,$)=>{const P=U(()=>$.close);var c=Te(),o=A(c);D(o,()=>n.icon,t=>{var g=q(),u=A(g);F(u,e,"icon",{},null),v(t,g)});var m=_(o,2);D(m,()=>n.icon||d(),t=>{var g=ze(),u=k(g);F(u,e,"default",{},null),y(g),v(t,g)},t=>{var g=q(),u=A(g);F(u,e,"default",{},null),v(t,g)});var r=_(m,2);D(r,d,t=>{var g=q(),u=A(g);F(u,e,"close-button",{get close(){return s(P)}},w=>{we(w,{class:"ms-auto -me-1.5 -my-1.5 dark:hover:bg-gray-700",get color(){return h.color},$$events:{click:[function(...a){var C;(C=s(P))==null||C.apply(this,a)},function(a){x.call(this,e,a)}],change(a){x.call(this,e,a)},keydown(a){x.call(this,e,a)},keyup(a){x.call(this,e,a)},focus(a){x.call(this,e,a)},blur(a){x.call(this,e,a)},mouseenter(a){x.call(this,e,a)},mouseleave(a){x.call(this,e,a)}}})}),v(t,g)}),v(l,c)}}})),H()}var Ce=T('<span class="font-medium"> </span>'),Pe=T('<li class="task-item bg-white p-4 shadow-sm rounded-lg svelte-ldo1p4"><p><strong>Guest:</strong> </p> <p><strong>Task:</strong> </p> <p><strong>Time:</strong> </p> <button class="mt-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600"> </button></li>'),Se=T('<ul class="space-y-4"></ul>'),Le=T("<p>No tasks for today.</p>"),De=T(`<!> <div class="container mx-auto p-4 svelte-ldo1p4"><h1 class="text-2xl font-semibold mb-4">Today's Tasks</h1> <!> <!></div>`,1);function Ge(b,e){j(e,!1);let n=J([]),i=J("");async function h(){try{const c=new Date().toISOString().split("T")[0],{data:o,error:m,status:r}=await W.from("calendar_days").select("events").limit(1).single();m&&r!==406?(L(i,"Error fetching todayâ€™s tasks. Please try again later."),console.error("Error fetching today's tasks:",m.message)):o?L(n,o.events):L(n,[])}catch(c){L(i,"An unexpected error occurred."),console.error("Unexpected error:",c)}}async function d(c){try{const o=new Date().toISOString().split("T")[0],{data:m,error:r}=await W.from("calendar_days").update({events:s(n).map(t=>t.id===c?{...t,confirmed:!0}:t)}).eq("date",o);r?(console.error("Error completing the task:",r.message),L(i,"Error completing the task. Please try again.")):L(n,s(n).map(t=>t.id===c?{...t,confirmed:!0}:t))}catch(o){console.error("Unexpected error:",o),L(i,"An unexpected error occurred while completing the task.")}}ne(h),K();var f=De(),p=A(f);ge(p,{class:"border-b px-4 py-2 shadow-sm",children:(c,o)=>{ue(c,{href:`${ve??""}/`,class:"text-xl font-semibold dark:text-blue-500",children:(m,r)=>{oe();var t=ae("Concierge Admin Dashboard");v(m,t)},$$slots:{default:!0}})},$$slots:{default:!0}});var l=_(p,2),$=_(k(l),2);D($,()=>s(i),c=>{$e(c,{color:"red",class:"mb-4",children:(o,m)=>{var r=Ce(),t=k(r,!0);y(r),N(()=>E(t,s(i))),v(o,r)},$$slots:{default:!0}})});var P=_($,2);D(P,()=>s(n).length>0,c=>{var o=Se();ie(o,5,()=>s(n),m=>m.id,(m,r)=>{var t=Pe(),g=k(t),u=_(k(g));y(g);var w=_(g,2),a=_(k(w));y(w);var C=_(w,2);const B=U(()=>(s(r).startDate?new Date(s(r).startDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A")??""),S=U(()=>(s(r).endDate?new Date(s(r).endDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A")??"");var O=_(k(C));N(()=>E(O,` ${s(B)}
						-
						${s(S)}`)),y(C);var G=_(C,2),te=k(G,!0);y(G),y(t),N(()=>{E(u,` ${(s(r).guestName||"Anonymous")??""}`),E(a,` ${s(r).summary??""}`),G.disabled=s(r).confirmed,E(te,s(r).confirmed?"Completed":"Complete Task")}),ee("click",G,()=>d(s(r).id)),v(m,t)}),y(o),v(c,o)},c=>{var o=q(),m=A(o);D(m,()=>!s(i),r=>{var t=Le();v(r,t)},null,!0),v(c,o)}),y(l),v(b,f),H()}export{Ge as component};
